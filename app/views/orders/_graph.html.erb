<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/morris.js/0.5.1/morris.css">
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/morris.js/0.5.1/morris.min.js"></script>

<div>
  <p class="sub-small-title">오늘의 키워드 [2017-08-14, 410]</p>
  <%= content_tag :div, '', id: 'todays_keyword' %>
</div>

<div class="graph-div">
  <p class="sub-small-title">데이터 변화량</p>
  <%= content_tag :div, '', id: 'products_chart' %>
</div>

<script>
  new Morris.Line({
    // ID of the element in which to draw the chart.
    element: 'products_chart',
    // Chart data records -- each entry in this array corresponds to a point on
    // the chart.
    data: [
      { date: '2017-07-11', total:234},
      { date: '2017-07-12', total:401},
      { date: '2017-07-13', total:603},
      { date: '2017-07-14', total:201},
      { date: '2017-07-15', total:351},
      { date: '2017-07-16', total:701},
      { date: '2017-07-17', total:8541},
      { date: '2017-07-18', total:901},
      { date: '2017-07-19', total:821},
      { date: '2017-07-20', total:943},
      { date: '2017-07-21', total:677},
      { date: '2017-07-22', total:678},
      { date: '2017-07-23', total:473},
      { date: '2017-07-24', total:571},
      { date: '2017-07-25', total:474},
      { date: '2017-07-26', total:301},
      { date: '2017-07-27', total:337},
      { date: '2017-07-28', total:301},
      { date: '2017-07-29', total:603},
      { date: '2017-07-30', total:1001},
      { date: '2017-07-31', total:533},
      { date: '2017-08-01', total:531},
      { date: '2017-08-02', total:445},
      { date: '2017-08-03', total:505},
      { date: '2017-08-04', total:283},
      { date: '2017-08-05', total:1301},
      { date: '2017-08-06', total:901},
      { date: '2017-08-07', total:332},
      { date: '2017-08-08', total:305},
      { date: '2017-08-09', total:441},
      { date: '2017-08-10', total:523},
      { date: '2017-08-11', total:301},
      { date: '2017-08-12', total:501},
      { date: '2017-08-13', total:301},
      { date: '2017-08-14', total:411},
    ],
    // The name of the data record attribute that contains x-values.
    xkey: ['date'],
    // A list of names of data record attributes that contain y-values.
    ykeys: ['total'],
    // Labels for the ykeys -- will be displayed when you hover over the
    // chart.
    labels: ['total'],

    hoverCallback: ['title'],
  });

  new Morris.Bar({
    element: 'todays_keyword',
    data: [
      { keyword: '하이트', a:21, b: (21/410)*100},
      { keyword: '케이스위스', a:17, b: (17/410)*100},
      { keyword: '렌즈나인', a:16, b: (16/410)*100},
      { keyword: '멕시카나', a:15, b: (15/410)*100},
      { keyword: '이니스프리', a:15, b: (15/410)*100},
      { keyword: '스노우', a:14, b: (14/410)*100},
      { keyword: '화장품', a:14, b:  (14/410)*100},
      { keyword: '교복', a:14, b: (14/410)*100},
      { keyword: '삼성페이', a:13, b: (13/410)*100},
      { keyword: '상어', a:8, b: (8/410)*100},
      { keyword: '에너제틱', a:8, b: (8/410)*100},
    ],
    xkey: 'keyword',
    ykeys: ['a', 'b'],
    labels: ['count', 'percentage']
  });
</script>